<!DOCTYPE html>
<html lang="ca" >
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <title>Traductor de Veu en Temps Real - Client Aut√≤nom</title> -->
    <title>Veu en moviment</title>
    <link rel="apple-touch-icon" sizes="180x180" href="./imatges/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./imatges/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./imatges/favicon-16x16.png">
    <link rel="manifest" href="./site.webmanifest">
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    <link href="./output.css" rel="stylesheet">
    <style>
        /* Assegurar que les transicions de temes s√≥n suaus */
        html.dark {
            color-scheme: dark;
        }
        
        body, html {
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        /* Estils per al loader */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        .drop-zone {
            transition: all 0.3s ease;
        }

        .drop-zone.drag-active {
            border-color: #3b82f6 !important; /* blue-500 */
            background-color: #eff6ff !important; /* blue-50 */
        }

        /* Estils per al mode fosc */
        .dark .drop-zone.drag-active {
            border-color: #60a5fa !important; /* blue-400 */
            background-color: #1e3a8a !important; /* blue-900 */
        }
        .zona-imatge {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        /* Estil per al hover normal */
        .zona-imatge:hover {
            border-color: #93c5fd; /* blue-300 */
            background-color: #eff6ff; /* blue-50 */
        }

        /* Estil per al moment en qu√® s'arrossega una imatge a sobre */
        .zona-imatge.drag-active {
            border-color: #3b82f6 !important; /* blue-500 */
            background-color: #dbeafe !important; /* blue-100 */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3); /* blue-500 amb opacitat */
            transform: scale(1.01);
        }

        /* Estils per al mode fosc */
        .dark .zona-imatge:hover {
            border-color: #60a5fa; /* blue-400 */
            background-color: #1e3a8a; /* blue-900 */
        }

        .dark .zona-imatge.drag-active {
            border-color: #60a5fa !important; /* blue-400 */
            background-color: #1e40af !important; /* blue-800 */
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.3); /* blue-400 amb opacitat */
        }
    </style>
</head>
<body class="min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200">
    <div id="app" class="container mx-auto px-4 py-8">
        <header class="mb-8">
            <div class="flex flex-col md:flex-row items-start md:items-center w-full gap-4">
        
                <!-- LOGO -->
                <div class="flex items-center space-x-4 logo">
                    <img src="./imatges/veuenmoviment.png" alt="Example" width="72" height="72">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800 dark:text-white">
                            Veu en moviment
                        </h1>
                        <h5 class="text-sm font-semibold text-gray-600 mb-0">
                            Traductor de Veu en temps real
                        </h5>
                    </div>
                </div>
        
                <!-- MENU -->
                <div class="flex gap-2 menu mt-2 md:mt-0 md:ml-auto">
                    <button id="tema-toggle" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white cursor-pointer">
                        <span id="tema-icon">üåô</span>
                    </button>
        
                    <button 
                        id="boto-configuracio"
                        class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white cursor-pointer">
                        ‚öôÔ∏è
                    </button>
                </div>
            </div>
        </header>


        

<!-- Formulari de configuraci√≥ de l'API -->
<div id="modal-configuracio" class="fixed inset-0 z-50 hidden flex items-center justify-center">
    <!-- fons semitransparent -->
    <div id="tanca-modal" class="absolute inset-0 bg-black bg-opacity-50"></div>
  
    <!-- contenidor principal -->
    <div class="relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md z-10 flex flex-col max-h-[85vh]">
      
      <!-- cap√ßalera fixa -->
      <header class="flex-none p-4 border-b border-gray-200 dark:border-gray-700">
        <div class="flex justify-between items-center">
          <h2 class="text-xl font-semibold text-gray-800 dark:text-white">Configuraci√≥ API</h2>
          <button id="tanca-configuracio" type="button"
                  class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 
                         cursor-pointer p-2 text-2xl rounded-full hover:bg-gray-100 dark:hover:bg-gray-700">
            ‚úï
          </button>
        </div>
      </header>
        
        <!-- CONTINGUT AMB SCROLL - amb al√ßada limitada -->
        <div class="overflow-y-auto flex-grow px-4 py-2">
            <form id="form-api" class="space-y-4">
                <div>
                    <label for="api-key" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                        Clau API d'OpenAI
                    </label>
                    <input type="password" id="api-key" name="api-key" 
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                                focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="flex items-center mt-2">
                        <input type="checkbox" id="mostrar-api-key" class="mr-2">
                        <label for="mostrar-api-key" class="text-sm text-gray-600 dark:text-gray-400">
                            Mostrar clau
                        </label>
                    </div>
                    <div class="text-sm text-gray-500 dark:text-gray-400 mt-3">
                        <p>La clau API es desar√† localment al teu navegador i mai s'enviar√† al nostre servidor.</p>
                        <p class="mt-1">Si no tens una clau API d'OpenAI, pots obtenir-ne una a <a href="https://platform.openai.com/account/api-keys" target="_blank" class="text-blue-500 hover:underline">platform.openai.com</a> requereix un pagament</p>
                        <p class="mt-1">Si vols consulta el consum o saber el cr√®dit que et queda ves a <a href="https://platform.openai.com/usage" target="_blank" class="text-blue-500 hover:underline">platform.openai.com/usage</a></p>
                    </div>                        
                </div>
                
                <!-- Secci√≥ de configuraci√≥ de veus -->
                <div class="border-t border-gray-200 dark:border-gray-700 pt-4 mt-4">
                    <h3 class="text-md font-semibold text-gray-800 dark:text-white mb-3">Configuraci√≥ de veus</h3>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <!-- Veu per idioma original -->
                        <div>
                            <label for="veu-original" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                Veu original
                            </label>
                            <select id="veu-original" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                            bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                                            focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer">
                                <optgroup label="Veus masculines">
                                    <option value="alloy">Alloy</option>
                                    <option value="echo">Echo</option>
                                    <option value="fable">Fable</option>
                                    <option value="onyx">Onyx</option>
                                    <option value="ash">Ash</option>
                                    <option value="balland" disabled>Balland</option>
                                    <option value="verse" disabled>Verse</option>
                                </optgroup>
                                <optgroup label="Veus femenines">
                                    <option value="nova">Nova</option>
                                    <option value="shimmer">Shimmer</option>
                                    <option value="coral">Coral</option>
                                    <option value="sage">Sage</option>
                                </optgroup>
                            </select>
                            <div class="flex items-center mt-3 mb-1 gap-2">
                                <p class="text-sm text-gray-500 dark:text-gray-400 mb-0">Escolta:</p>
                                <button id="prova-veu-original" type="button"
                                        class="shrink-0 inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                            bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200
                                            focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 cursor-pointer">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Veu per idioma tradu√Øt -->
                        <div>
                            <label for="veu-traduida" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                Veu traducci√≥
                            </label>
                            <select id="veu-traduida" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                            bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                                            focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer" >
                                <optgroup label="Veus masculines">
                                    <option value="alloy">Alloy</option>
                                    <option value="echo">Echo</option>
                                    <option value="fable">Fable</option>
                                    <option value="onyx">Onyx</option>
                                    <option value="ash">Ash</option>
                                    <option value="balland" disabled>Balland</option>
                                    <option value="verse" disabled>Verse</option>
                                </optgroup>
                                <optgroup label="Veus femenines">
                                    <option value="nova">Nova</option>
                                    <option value="shimmer">Shimmer</option>
                                    <option value="coral">Coral</option>
                                    <option value="sage">Sage</option>
                                </optgroup>
                            </select>
                            <!-- <button id="prova-veu-traduida" type="button"
                                    class="shrink-0 inline-flex items-center mt-3 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                        bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200
                                        focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                                </svg>
                            </button> -->
                            <div class="flex items-center mt-3 mb-1 gap-2">
                                <p class="text-sm text-gray-500 dark:text-gray-400 mb-0">Escolta:</p>
                                <button id="prova-veu-traduida" type="button"
                                        class="shrink-0 inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                            bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200
                                            focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 cursor-pointer">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>  
                <!-- Reproductor d'√†udio per escoltar mostres (inicialment ocult) -->
                <div id="prova-veu-container" class="mt-3 hidden">
                    <audio id="prova-veu-reproductor" controls class="w-full"></audio>
                </div>                  

                <!-- Secci√≥ de configuraci√≥ d'idiomes -->
                <div class="border-t border-gray-200 dark:border-gray-700 pt-4 mt-4">
                    <h3 class="text-md font-semibold text-gray-800 dark:text-white mb-3">Configuraci√≥ d'idiomes</h3>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <!-- idioma original -->
                        <div>
                            <label for="idioma-original" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                Idioma original
                            </label>
                            <select id="idioma-original" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                            bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                                            focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer">
                                <option value="">Selecciona...</option> 
                            </select>
                        </div>
                        
                        <!-- Veu per idioma tradu√Øt -->
                        <div>
                            <label for="idioma-traduccio" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                               Idioma a tradu√Ør
                            </label>
                            <select id="idioma-traduccio" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                            bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                                            focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer" >
                                <option value="">Selecciona...</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Espai extra al final del scroll -->
                <div class="h-4"></div>
            </form>
        </div>
        
        <!-- PEU FIX AMB BOT√ì DE DESAR -->
        <footer class="flex-none p-4 border-t border-gray-200 dark:border-gray-700">
            <button type="submit" form="form-api"
                    class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg
                           focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer text-lg">
              Desar configuraci√≥
            </button>
          </footer>
    </div>
</div>

        <!-- Av√≠s API no configurada -->
        <div id="avis-api" class="hidden bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 p-4 mb-6">
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <p class="text-sm text-yellow-700 dark:text-yellow-200">
                        Necessites configurar la teva clau API d'OpenAI per utilitzar l'aplicaci√≥.
                        <button id="configura-api" class="font-medium underline ml-1 focus:outline-none  cursor-pointer">
                            Configurar ara
                        </button>
                    </p>
                </div>
            </div>
        </div>

        <!-- Aplicaci√≥ principal -->
        <div id="app-principal">
            <div class="max-w-2xl mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                <div class="flex items-end gap-2 mb-6">
                    <div class="flex-1">
                        <label for="idioma-origen" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                            Idioma original
                        </label>
                        <select id="idioma-origen" 
                                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                        bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                                        focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer">
                            <option value="">Selecciona...</option>                 
                        </select>
                    </div>
                    <div class="flex items-center justify-center">
                        <button id="intercanviar-idiomes" 
                                class="p-2 rounded-full bg-transparent hover:bg-gray-200 dark:bg-transparent dark:hover:bg-gray-600 
                                      border-transparent dark:border-transparent focus:outline-none focus:ring-2 
                                      focus:ring-blue-500 transition-colors duration-200 cursor-pointer">

                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                            </svg>
                        </button>
                    </div>
                    <div class="flex-1">
                        <label for="idioma-desti" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                            Idioma tradu√Øt
                        </label>
                        <select id="idioma-desti" 
                                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                        bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                                        focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer">
                            <option value="">Selecciona...</option> 
                        </select>
                    </div>
                </div>
                <div class="mb-6 text-center">
                    <div class="flex justify-center mb-4">
                        <div class="inline-flex rounded-md" role="group">
                            <button id="mode-microfon" type="button" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-l-lg hover:bg-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-500 focus:bg-blue-700 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-1 inline-block" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd" />
                                </svg>
                                Micr√≤fon
                            </button>
                            <button id="mode-text" type="button" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border-y border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-500 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-1 inline-block" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z" clip-rule="evenodd" />
                                </svg>
                                Text
                            </button>
                            <button id="mode-imatge" type="button" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-r-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-500 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-1 inline-block" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd" />
                                </svg>
                                Imatge
                            </button>
                        </div>
                    </div>

                    <!-- Modificaci√≥: Contenidor amb bot√≥ de gravaci√≥ i cancel¬∑laci√≥ -->
                    <div id="contingut-microfon">
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                            Quan facis clic, el navegador et demanar√† perm√≠s per accedir al micr√≤fon
                        </p>
                        <div class="flex justify-center space-x-3">
                            <button id="boto-gravacio" 
                                    class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-full 
                                            transition-colors duration-200 relative mb-1 cursor-pointer">
                                <span id="estat-gravacio">Comen√ßar gravaci√≥</span>
                                <span id="indicador-gravacio" class="hidden absolute -top-1 -right-1 w-3 h-3 bg-red-600 rounded-full animate-pulse"></span>
                            </button>
                            <!-- Bot√≥ de cancel¬∑laci√≥ - inicialment ocult -->
                            <button id="boto-cancelar" 
                                    class="hidden bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full 
                                            transition-colors duration-200 mb-1 cursor-pointer">
                                Cancel¬∑lar
                            </button>
                        </div>
                        <!-- Temporitzador de gravaci√≥ -->
                        <div id="temporitzador-gravacio" class="hidden text-sm text-gray-600 dark:text-gray-400 mt-1">
                            Temps: <span id="temps-gravacio">00:00</span>
                        </div>
                    </div>

                    <!-- Contingut del mode text - inicialment ocult -->
                    <div id="contingut-text" class="hidden">
                        <div class="max-w-lg mx-auto">
                            <textarea id="entrada-text" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                            bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                                            focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="Escriu el text que vols traduir..."
                                    rows="4"></textarea>
                            <button id="boto-traduir-text" 
                                    class="mt-3 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded
                                        transition-colors duration-200  cursor-pointer">
                                Traduir i generar √†udio
                            </button>
                        </div>
                    </div>

                    <!-- Contingut del mode imatge - inicialment ocult -->
                    <div id="contingut-imatge" class="hidden">
                        <div class="max-w-lg mx-auto">
                            <div class="mb-4">
                                <div class="flex items-center justify-center w-full">
                                    <label for="entrada-imatge" class="zona-imatge flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg bg-gray-50 dark:hover:bg-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:hover:border-gray-500">
                                        <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                            <svg class="w-10 h-10 mb-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                            </svg>
                                            <p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Fes clic per pujar</span> o arrossega i deixa anar</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">PNG, JPG o JPEG (MAX. 5MB)</p>
                                        </div>
                                        <input id="entrada-imatge" type="file" class="hidden" accept="image/png, image/jpeg, image/jpg" />
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Previsualitzaci√≥ de la imatge pujada -->
                            <div id="previsualitzacio-imatge" class="hidden mt-4 mb-4">
                                <div class="relative">
                                    <img id="imatge-pujada" class="w-full h-auto rounded-lg" src="#" alt="Imatge pujada" />
                                    <button id="eliminar-imatge" class="absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 focus:outline-none">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <button id="boto-traduir-imatge" 
                                    class="mt-3 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded
                                        transition-colors duration-200 cursor-pointer hidden">
                                Extreure i traduir text
                            </button>
                        </div>
                    </div>

                    <!-- Indicador d'estat - inicialment ocult -->
                    <div id="estat-traduccio" class="hidden text-center mb-4">
                        <div class="flex flex-col items-center justify-center">
                            <div id="loader-traduccio" class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500 mb-2"></div>
                            <p class="text-gray-600 dark:text-gray-400" id="missatge-estat">Processant traducci√≥...</p>
                        </div>
                    </div>

                    <!-- Resultats de traducci√≥ d'imatge - inicialment ocult -->
                    <div id="resultats-imatge" class="hidden mt-6 bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h3 class="text-lg font-semibold mb-3 text-gray-800 dark:text-white">Resultats de la traducci√≥</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <h4 class="text-md font-semibold mb-2 text-gray-700 dark:text-gray-300">Text detectat (original)</h4>
                                <div id="text-imatge-original" class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-gray-800 dark:text-gray-200 text-sm"></div>
                            </div>
                            <div>
                                <h4 class="text-md font-semibold mb-2 text-gray-700 dark:text-gray-300">Text tradu√Øt</h4>
                                <div id="text-imatge-traduit" class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-gray-800 dark:text-gray-200 text-sm"></div>
                                
                                <!-- Bot√≥ per convertir a √†udio -->
                                <div class="mt-3 flex items-center space-x-2">
                                    <button id="boto-audio-imatge" class="flex items-center px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium rounded transition-colors duration-200 cursor-pointer">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd" />
                                        </svg>
                                        Escoltar traducci√≥
                                    </button>
                                    
                                    <!-- Bot√≥ per descarregar √†udio (inicialment ocult) -->
                                    <button id="descarregar-audio-imatge" class="hidden items-center px-3 py-2 bg-green-500 hover:bg-green-600 text-white text-sm font-medium rounded transition-colors duration-200 cursor-pointer">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                                        </svg>
                                        Descarregar √†udio
                                    </button>
                                </div>
                                
                                <!-- Reproductor d'√†udio (inicialment ocult) -->
                                <div id="audio-imatge-container" class="mt-3 hidden">
                                    <audio id="audio-imatge-reproductor" controls class="w-full"></audio>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="reproductor-audio" class="hidden mb-6 mt-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <h3 class="text-lg font-semibold mb-0 text-gray-800 dark:text-white">√Äudio original</h3>
                                <button id="descarregar-audio-original" class="text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 flex items-center  cursor-pointer">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                                    </svg>
                                    Descarregar
                                </button>
                                <audio id="audio-original" controls class="w-full"></audio>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold mb-0 text-gray-800 dark:text-white">√Äudio tradu√Øt</h3>
                                <button id="descarregar-audio-traduit" class="text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 flex items-center  cursor-pointer">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                                    </svg>
                                    Descarregar
                                </button>
                                <audio id="audio-reproductor" controls class="w-full"></audio>
                            </div>
                        </div>
                    </div>
                    
                    <div id="textos-traduccio" class="hidden bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <h4 class="text-md font-semibold mb-2 text-gray-700 dark:text-gray-300">Transcripci√≥ original</h4>
                                <div id="text-transcripcio" class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-gray-800 dark:text-gray-200 text-sm"></div>
                            </div>
                            <div>
                                <h4 class="text-md font-semibold mb-2 text-gray-700 dark:text-gray-300">Traducci√≥</h4>
                                <div id="text-traduccio" class="bg-gray-50 dark:bg-gray-700 p-3 rounded text-gray-800 dark:text-gray-200 text-sm"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="historial" class="mt-8">
                    <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white">Historial de traduccions</h3>
                    <div id="llista-historial" class="space-y-4"></div>
                </div>

            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>